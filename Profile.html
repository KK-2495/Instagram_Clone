<!DOCTYPE html>
<html lang="en">

    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Profile</title>
        <link rel="stylesheet" href="./HomePage.css">
        <link rel="stylesheet" href="./Profile.css">
        <script src="https://kit.fontawesome.com/3f7f3f9444.js" crossorigin="anonymous"></script>
    </head>

    <body>
        <div class="screen">
            <div class="navBar">
                <div class="logo">
                    <img src="https://1000logos.net/wp-content/uploads/2017/02/Instagram-Logo-2010-2013-768x432.png"
                        alt="log" />
                </div>
                <div class="navBarList">
                    <div onclick="redirectHomepage()" class="navBarOptions">
                        <i class="fa-solid fa-house"></i>
                        <p>Home</p>
                    </div>
                    <div onclick="displaySearch()" class="navBarOptions">
                        <i class="fa-solid fa-magnifying-glass"></i>
                        <p>Search</p>
                    </div>
                    <div class="navBarOptions">
                        <i class="fa-solid fa-compass"></i>
                        <p>Explore</p>
                    </div>
                    <div class="navBarOptions">
                        <i class="fa-solid fa-film"></i>
                        <p>Reels</p>
                    </div>
                    <div class="navBarOptions">
                        <i class="fa-brands fa-facebook-messenger"></i>
                        <p>Messages</p>
                    </div>
                    <div class="navBarOptions">
                        <i class="fa-regular fa-heart"></i>
                        <p>Notifications</p>
                    </div>
                    <div class="navBarOptions">
                        <i class="fa-solid fa-square-plus"></i>
                        <p>Create</p>
                    </div>
                    <div class="navBarOptions">
                        <i class="fa-regular fa-user"></i>
                        <p>Profile</p>
                    </div>
                    <div class="navBarOptions">
                        <i class="fa-solid fa-bars"></i>
                        <p>More</p>
                    </div>
                    <div id="mySidebar" class="searchBar">
                        <div>
                            <h1>Search</h1>
                            <form onsubmit="SearchUser(event)">
                                <input type="search" placeholder="Search" id="Search_users" />
                            </form>
                        </div>
                        <div id="search_result">
                            <div id="sugg-head" class="sugg_div">
                                <img src="" />
                                <p></p>
                            </div>
                            <div id="no_display">
                                <p></p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="profile">
                <div class="profileDetails">
                    <div id="userImage" class="profilePic">
                        <img src="https://cdn-icons-png.flaticon.com/512/3135/3135715.png"
                            alt="" />
                    </div>
                    <div class="userData">
                        <div onclick="redirectEditProfile()" class="userName">
                            <p id="userSwitch">Krish</p>
                            <button>Edit Profile</button>
                            <i class="fa-solid fa-gear"></i>
                        </div>
                        <div id="logout"></div>
                        <div class="followers">
                            <div>
                                <b>101</b>
                                <p>Posts</p>
                            </div>
                            <div>
                                <b>364</b>
                                <p>Followers</p>
                            </div>
                            <div>
                                <b>300</b>
                                <p>Following</p>
                            </div>
                        </div>
                        <div class="userBio">
                            <div id="userSwitch1" class="userBioName">
                                <b>Krishna Kalimuthu</b>
                            </div>
                            <div id="userBio" class="bio">
                                <p>üôè#‡Æ§‡ÆÆ‡Æø‡Æ¥‡Æ©‡Øç‡Æü‡Ææ #tamilanda</p>
                                <p>üáÆüá≥ ùïÄ‚ÑïùîªùïÄùî∏‚Ñï üáÆüá≥</p>
                                <p>200 NS üèçÔ∏èüí®</p>
                                <p>üéÇ24th April 1995üéÇ</p>
                            </div>
                        </div>
                    </div>
                </div>


                <div class="profilePost">
                    <div class="userPosts">
                        <i class="fa-solid fa-table-cells"></i>
                        <p>POSTS</p>
                    </div>
                    <div class="savedPosts">
                        <i class="fa-regular fa-bookmark"></i>
                        <p>SAVED</p>
                    </div>
                </div>
                <div id="postName" class="profilePostGrid">
                    <!-- <div class="userProfilePost">
                        <img src="https://scontent.fbom12-1.fna.fbcdn.net/v/t39.30808-6/294699813_4626468690786576_4190628195338301237_n.jpg?stp=dst-jpg_s851x315&_nc_cat=108&ccb=1-7&_nc_sid=da31f3&_nc_ohc=rp9hrGmj4PoAX9jtlep&_nc_ht=scontent.fbom12-1.fna&oh=00_AfBHJ6iRP9FtMqIIkDx2xUriqDWxOqfGqdWb2d0iCLxQZA&oe=646CDF22"
                            alt="" />
                    </div>
                    <div class="userProfilePost">
                        <img src="https://scontent.fbom12-1.fna.fbcdn.net/v/t39.30808-6/287644932_4520097731423673_8225992443045377975_n.jpg?stp=dst-jpg_s851x315&_nc_cat=109&ccb=1-7&_nc_sid=da31f3&_nc_ohc=ZyOEwAtN-FwAX-_IiOB&_nc_ht=scontent.fbom12-1.fna&oh=00_AfBjfFvwKYCqteEN6RflgyOKDPw656TpIF1dAOlKgJWDAg&oe=646D20D6"
                            alt="" />
                    </div>
                    <div class="userProfilePost">
                        <img src="https://scontent.fbom12-1.fna.fbcdn.net/v/t39.30808-6/237157392_3620430411390414_5325721952518923526_n.jpg?stp=c315.0.810.810a_dst-jpg_s851x315&_nc_cat=110&ccb=1-7&_nc_sid=da31f3&_nc_ohc=r-QoeVY1QigAX9m63Cr&_nc_ht=scontent.fbom12-1.fna&oh=00_AfAWUVOKxkS9PWSweRQ40OKPYx_Vq8SUCzryIRafi2OkhA&oe=646D196E"
                            alt="" />
                    </div>
                    <div class="userProfilePost">
                        <img src="https://scontent.fbom12-1.fna.fbcdn.net/v/t1.6435-9/194063784_3447670548666402_3297368860895308252_n.jpg?stp=dst-jpg_s851x315&_nc_cat=107&ccb=1-7&_nc_sid=da31f3&_nc_ohc=x_hpBse4GMUAX9mlidH&_nc_ht=scontent.fbom12-1.fna&oh=00_AfBCgKPr3U8ZuiPVSf9ZqYiz0Z6LWMb4fp1q5t47-4jDzA&oe=6490592F"
                            alt="" />
                    </div>
                    <div class="userProfilePost">
                        <img src="https://scontent.fbom12-1.fna.fbcdn.net/v/t1.6435-9/87014657_2248221538611315_5431463698910674944_n.jpg?stp=dst-jpg_s851x315&_nc_cat=105&ccb=1-7&_nc_sid=da31f3&_nc_ohc=dwoeInxQYIEAX8_EQ9Z&_nc_ht=scontent.fbom12-1.fna&oh=00_AfCvx94OyhrC1yMxed6qeasGpL7YJrkFhLE7e8V1-1hRYw&oe=6490471D"
                            alt="" />
                    </div>
                    <div class="userProfilePost">
                        <img src="https://scontent.fbom12-1.fna.fbcdn.net/v/t1.6435-9/76939199_2074660635967407_9033028732792602624_n.jpg?stp=c0.242.1080.1080a_dst-jpg_s851x315&_nc_cat=102&ccb=1-7&_nc_sid=da31f3&_nc_ohc=goasOyolqdEAX-6YljJ&_nc_ht=scontent.fbom12-1.fna&oh=00_AfDOiIPGav8cCcjUF12EcC5HqVX1ztLe29_PSGamW6IL4w&oe=64903B19"
                            alt="" />
                    </div> -->
                </div>
            </div>
        </div>
        <script>
            window.onload = function () {
                var currentUser = JSON.parse(localStorage.getItem("instaCurrentUser"));
                if (currentUser) {
                    var showName = document.getElementById("userSwitch");
                    var showName1 = document.getElementById("userSwitch1");
                    var showImage = document.getElementById("userImage");
                    var showBio = document.getElementById("userBio");
                    var logoutswitch = document.getElementById("logout");
                    var activeUserName = `<h4>${currentUser.iName}</h4>`;
                    var activeUserName1 = `<b>${currentUser.iName}</b>`;
                    var userImage = `<div><img src="${currentUser.iImage}"/></div>`;
                    var userBio = `<div>${currentUser.iBio}</div>`;
                    var logout = `<button onclick="logout()">Log Out</button>`;
                    showName.innerHTML = activeUserName;
                    showName1.innerHTML = activeUserName1;
                    showImage.innerHTML = userImage;
                    showBio.innerHTML = userBio;
                    logoutswitch.innerHTML = logout;
                     // *********Add post********
                // var displayImage = document.getElementById("postImage");
                // var postImage = "";
                // var displayName = document.getElementById("postName");
                // var postName = "";
                // var displayCaption = document.getElementById("postCaption");
                // var postCaption = "";

                // var postBackend = JSON.parse(localStorage.getItem("posts"));
                // for (var i = 0; i < postBackend.length; i++) {
                //     // postImage += `<div class="postImage"><img src="${postBackend[i].postImage}"/></div>`;
                //     postName += `<div class="userProfilePost">
                //         <img src="${postBackend[i].postImage}" alt=""/>
                //     </div>`;
                //     // postCaption += `<p>${postBackend[i].postCaption}</p>`;
                // }
                // displayName.innerHTML = postName;

                    var instagram_userData = JSON.parse(localStorage.getItem("instaUsers"));
                    for(var i=0;i<instagram_userData.length;i++){
                        if(currentUser.iEmail == instagram_userData[i].iEmail){
                            currentUser.iPosts = instagram_userData[i].iPosts;
                        }
                    }

                    localStorage.setItem("instaCurrentUser", JSON.stringify(currentUser));
                    


                    //profile page display post

                    var profilePostEdit = document.getElementById("postName");
                    var profilePostEditString = ""
                    var iPostCurrentUser = currentUser.iPosts;

                    for(var i=0;i<iPostCurrentUser.length;i++){
                        profilePostEditString += `<div class="userProfilePost">
                        <img src="${iPostCurrentUser[i].postImage}"
                            alt="" />
                    </div>`;
                    }

                    profilePostEdit.innerHTML = profilePostEditString;






                } else {
                    alert("You've Logged out.");
                }
                // *********Add post********
                // var displayImage = document.getElementById("postImage");
                // var postImage = "";
                // var displayName = document.getElementById("postName");
                // var postName = "";
                // var displayCaption = document.getElementById("postCaption");
                // var postCaption = "";

                // var postBackend = JSON.parse(localStorage.getItem("posts"));
                // for (var i = 0; i < postBackend.length; i++) {
                //     // postImage += `<div class="postImage"><img src="${postBackend[i].postImage}"/></div>`;
                //     postName += `<div class="userProfilePost">
                //         <img src="${postBackend[i].postImage}" alt=""/>
                //     </div>`;
                //     // postCaption += `<p>${postBackend[i].postCaption}</p>`;
                // }
                // displayName.innerHTML = postName;

                // *********Add Story********

                // var displayStoryName = document.getElementById("storyName");
                // var storyName = "";


                // var storyBackend = JSON.parse(localStorage.getItem("instaStory"));
                // for (var i = 0; i < storyBackend.length; i++) {
                //     storyName += `
                //     <div class="stories">
                //                 <div>
                //             <img src="${storyBackend[i].storyImage}" alt="story" />
                //             </div>
                //             <p>${storyBackend[i].storyName}</p></div>
                //         `;

                // }
                // displayStoryName.innerHTML = storyName;
              
                




            }

            // Search Bar & Toggle
            function displaySearch(){
                var get = document.querySelector(".searchBar");
                if(get.style.display === "none"){
                    get.style.display = "block";
                }else{
                    get.style.display = "none";
                }
            }
            function redirectEditProfile(){
                window.location.href = `./editProfile.html`;
            }
            function redirectHomepage(){
                window.location.href = `./HomePage.html`;
            }
            function logout() {
                localStorage.removeItem("instaCurrentUser");
                window.location.reload();
            }
        </script>
    </body>

</html>